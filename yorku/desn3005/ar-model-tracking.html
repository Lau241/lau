<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DESN3005 Augmented Reality</title>

    <link rel="icon" href="../media/RL.png" type="image/png">
    <link rel="stylesheet" href="../portfolioStyles/siteToolkit.css">
    <link rel="stylesheet" href="../projects.css">
    <link rel="stylesheet" href="style.css">

  <!-- Open Graph tags -->
  <meta property="og:title" content="SIAFF AR EXPERIENCE">
  <meta property="og:description" content="Augmented Reality Experience, coded by Richard Lau.">
  <meta property="og:url" content="https://richardlau.ca/yorku/desn3005/arexperience">
  <meta property="og:type" content="website">    

    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      body { margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; background: #232323; }
      model-viewer { width: 100%; max-width: 100%; height: 75vh; }
    </style>    
  </head>

  <body>
        <model-viewer
        id="award1" 
        src="towerofescher-small.glb"
        ios-src="towerofescher-small.usdz"
        shadow-intensity="1"
        shadow-softness="0.8"
        environment-image="https://richardlau.ca/yorku/desn3005/siaff-en/models/lightbox.png"                            
        alt="Tower of Escher by Richard Lau"
        camera-controls 
        auto-rotate 
        ar 
        ar-modes="webxr scene-viewer quick-look">
        </model-viewer>


        <script>
        const modelViewer = document.querySelector('#award1');

        async function launchAR() {
          // Detect iOS
          const isiOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

          if (isiOS) {
            // Open USDZ file for Quick Look AR
            const usdzURL = modelViewer.getAttribute('ios-src');
            if (usdzURL) {
              window.location.href = usdzURL;
            }
          } else {
            // For WebXR (Android / compatible browsers)
            if (await modelViewer.canActivateAR) {
              try {
                await modelViewer.activateAR();
                console.log('AR mode activated');
              } catch (err) {
                console.warn('AR could not be activated automatically:', err);
              }
            }
          }
        }

        // Wait for the model to load
        modelViewer.addEventListener('load', launchAR);
        </script>        

  </body>


</html>
